{
  "openapi": "3.0.3",
  "info": {
    "title": "신일 프로젝트 API",
    "description": "신일 프로젝트의 REST API 문서입니다. 기본 정보, 관계 정보, 실적/정산 정보, 참고 데이터, 공지사항 등의 기능을 제공합니다.",
    "version": "2.0.0",
    "contact": {
      "name": "신일 프로젝트 개발팀",
      "email": "dev@shinil.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "/api",
      "description": "현재 도메인 API 서버 (프로덕션)"
    },
    {
      "url": "http://localhost:3001",
      "description": "로컬 API 서버 (개발용)"
    },
    {
      "url": "http://localhost:3003/api",
      "description": "로컬 테스트 API 서버"
    },
    {
      "url": "http://localhost:8080",
      "description": "로컬 정적 파일 서버 (문서만)"
    }
  ],
  "tags": [
    {
      "name": "인증",
      "description": "사용자 인증 관련 API"
    },
    {
      "name": "사용자 관리",
      "description": "사용자 생성 및 관리 API"
    },
    {
      "name": "기본 정보",
      "description": "회원, 제품, 병원, 약국 기본 정보 관리"
    },
    {
      "name": "관계 정보",
      "description": "병원-회원, 병원-약국 매핑 정보 관리"
    },
    {
      "name": "실적/정산",
      "description": "실적 등록, 정산월, 정산 정보 관리"
    },
    {
      "name": "참고 데이터",
      "description": "도매매출, 직거래매출 정보 관리"
    },
    {
      "name": "공지사항",
      "description": "공지사항 관리"
    },
    {
      "name": "시스템",
      "description": "시스템 상태 확인 API"
    }
  ],
  "paths": {
    "/api": {
      "get": {
        "tags": ["시스템"],
        "summary": "API 상태 확인",
        "description": "API 서버의 기본 상태를 확인합니다.",
        "responses": {
          "200": {
            "description": "성공적으로 API 상태를 반환",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "test": {
                      "type": "string",
                      "example": "001"
                    },
                    "status": {
                      "type": "string",
                      "example": "OK"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-01T00:00:00.000Z"
                    },
                    "version": {
                      "type": "string",
                      "example": "2.0.0"
                    },
                    "environment": {
                      "type": "string",
                      "example": "production"
                    },
                    "message": {
                      "type": "string",
                      "example": "Vercel API Routes working correctly"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth": {
      "post": {
        "tags": ["인증"],
        "summary": "사용자 로그인",
        "description": "이메일과 비밀번호를 사용하여 사용자 인증을 수행합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "사용자 이메일",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "description": "사용자 비밀번호",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Authentication successful"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "description": "JWT 액세스 토큰"
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "사용자 ID"
                            },
                            "email": {
                              "type": "string",
                              "description": "사용자 이메일"
                            },
                            "role": {
                              "type": "string",
                              "description": "사용자 역할"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
    "/api/verify-token": {
      "post": {
        "tags": ["인증"],
        "summary": "토큰 검증",
        "description": "JWT 토큰의 유효성을 검증합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["token"],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "검증할 JWT 토큰"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "토큰 검증 성공"
          },
          "401": {
            "description": "토큰 검증 실패"
          }
        }
      }
    },
    "/api/create-user": {
      "post": {
        "tags": ["사용자 관리"],
        "summary": "사용자 생성",
        "description": "새로운 사용자를 생성합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "사용자 이메일"
                  },
                  "password": {
                    "type": "string",
                    "description": "사용자 비밀번호"
                  },
                  "user_type": {
                    "type": "string",
                    "description": "사용자 타입",
                    "enum": ["admin", "user"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "사용자 생성 성공"
          }
        }
      }
    },
    "/api/members": {
      "get": {
        "tags": ["기본 정보"],
        "summary": "회원 목록 조회",
        "description": "등록된 회원들의 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "회원 목록 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "company_name": {
                            "type": "string",
                            "description": "회사명"
                          },
                          "business_number": {
                            "type": "string",
                            "description": "사업자등록번호"
                          },
                          "representative": {
                            "type": "string",
                            "description": "대표자"
                          },
                          "address": {
                            "type": "string"
                          },
                          "phone": {
                            "type": "string"
                          },
                          "email": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["기본 정보"],
        "summary": "회원 등록",
        "description": "새로운 회원을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["company_name", "business_number", "representative"],
                "properties": {
                  "company_name": {
                    "type": "string",
                    "description": "회사명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "representative": {
                    "type": "string",
                    "description": "대표자"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "phone": {
                    "type": "string",
                    "description": "전화번호"
                  },
                  "email": {
                    "type": "string",
                    "description": "이메일"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "회원 등록 성공"
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "tags": ["기본 정보"],
        "summary": "제품 목록 조회",
        "description": "등록된 제품들의 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "제품 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["기본 정보"],
        "summary": "제품 등록",
        "description": "새로운 제품을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["product_name", "insurance_code", "drug_price"],
                "properties": {
                  "product_name": {
                    "type": "string",
                    "description": "제품명"
                  },
                  "insurance_code": {
                    "type": "string",
                    "description": "보험코드"
                  },
                  "drug_price": {
                    "type": "number",
                    "description": "약가"
                  },
                  "commission_rate": {
                    "type": "number",
                    "description": "수수료율"
                  },
                  "manufacturer": {
                    "type": "string",
                    "description": "제조사"
                  },
                  "description": {
                    "type": "string",
                    "description": "설명"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "제품 등록 성공"
          }
        }
      }
    },
    "/api/hospitals": {
      "get": {
        "tags": ["기본 정보"],
        "summary": "병원 목록 조회",
        "description": "등록된 병원들의 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "병원 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["기본 정보"],
        "summary": "병원 등록",
        "description": "새로운 병원을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["hospital_name", "business_number"],
                "properties": {
                  "hospital_name": {
                    "type": "string",
                    "description": "병원명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "phone": {
                    "type": "string",
                    "description": "전화번호"
                  },
                  "contact_person": {
                    "type": "string",
                    "description": "담당자"
                  },
                  "email": {
                    "type": "string",
                    "description": "이메일"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "병원 등록 성공"
          }
        }
      }
    },
    "/api/pharmacies": {
      "get": {
        "tags": ["기본 정보"],
        "summary": "약국 목록 조회",
        "description": "등록된 약국들의 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "약국 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["기본 정보"],
        "summary": "약국 등록",
        "description": "새로운 약국을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["pharmacy_name", "business_number"],
                "properties": {
                  "pharmacy_name": {
                    "type": "string",
                    "description": "약국명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "phone": {
                    "type": "string",
                    "description": "전화번호"
                  },
                  "contact_person": {
                    "type": "string",
                    "description": "담당자"
                  },
                  "email": {
                    "type": "string",
                    "description": "이메일"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "약국 등록 성공"
          }
        }
      }
    },
    "/api/hospital-mappings": {
      "get": {
        "tags": ["관계 정보"],
        "summary": "병원-회원 매핑 목록 조회",
        "description": "병원과 회원 간의 매핑 정보를 조회합니다.",
        "responses": {
          "200": {
            "description": "병원-회원 매핑 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["관계 정보"],
        "summary": "병원-회원 매핑 등록",
        "description": "병원과 회원 간의 매핑을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["hospital_id", "company_id"],
                "properties": {
                  "hospital_id": {
                    "type": "string",
                    "description": "병원 ID"
                  },
                  "company_id": {
                    "type": "string",
                    "description": "회원 ID"
                  },
                  "commission_rate": {
                    "type": "number",
                    "description": "수수료율"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "병원-회원 매핑 등록 성공"
          }
        }
      }
    },
    "/api/pharmacy-mappings": {
      "get": {
        "tags": ["관계 정보"],
        "summary": "병원-약국 매핑 목록 조회",
        "description": "병원과 약국 간의 매핑 정보를 조회합니다.",
        "responses": {
          "200": {
            "description": "병원-약국 매핑 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["관계 정보"],
        "summary": "병원-약국 매핑 등록",
        "description": "병원과 약국 간의 매핑을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["hospital_id", "pharmacy_id"],
                "properties": {
                  "hospital_id": {
                    "type": "string",
                    "description": "병원 ID"
                  },
                  "pharmacy_id": {
                    "type": "string",
                    "description": "약국 ID"
                  },
                  "relationship_type": {
                    "type": "string",
                    "description": "관계 타입",
                    "enum": ["direct", "indirect"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "병원-약국 매핑 등록 성공"
          }
        }
      }
    },
    "/api/settlement-months": {
      "get": {
        "tags": ["실적/정산"],
        "summary": "정산월 목록 조회",
        "description": "정산월 정보 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "정산월 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["실적/정산"],
        "summary": "정산월 등록",
        "description": "새로운 정산월을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["settlement_month", "registration_start_date", "registration_end_date"],
                "properties": {
                  "settlement_month": {
                    "type": "string",
                    "description": "정산월 (YYYY-MM 형식)"
                  },
                  "registration_start_date": {
                    "type": "string",
                    "format": "date",
                    "description": "실적 등록 시작일"
                  },
                  "registration_end_date": {
                    "type": "string",
                    "format": "date",
                    "description": "실적 등록 종료일"
                  },
                  "settlement_date": {
                    "type": "string",
                    "format": "date",
                    "description": "정산일"
                  },
                  "status": {
                    "type": "string",
                    "description": "상태",
                    "enum": ["open", "closed"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "정산월 등록 성공"
          }
        }
      }
    },
    "/api/performance": {
      "get": {
        "tags": ["실적/정산"],
        "summary": "실적 목록 조회",
        "description": "등록된 실적 정보 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "실적 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["실적/정산"],
        "summary": "실적 등록",
        "description": "새로운 실적을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["company_id", "hospital_id", "product_id", "settlement_month"],
                "properties": {
                  "company_id": {
                    "type": "string",
                    "description": "회원 ID"
                  },
                  "hospital_id": {
                    "type": "string",
                    "description": "병원 ID"
                  },
                  "product_id": {
                    "type": "string",
                    "description": "제품 ID"
                  },
                  "prescription_count": {
                    "type": "integer",
                    "description": "처방 건수"
                  },
                  "settlement_month": {
                    "type": "string",
                    "description": "정산월"
                  },
                  "notes": {
                    "type": "string",
                    "description": "비고"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "실적 등록 성공"
          }
        }
      }
    },
    "/api/wholesale-sales": {
      "get": {
        "tags": ["참고 데이터"],
        "summary": "도매매출 목록 조회",
        "description": "도매매출 정보 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "도매매출 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["참고 데이터"],
        "summary": "도매매출 등록",
        "description": "새로운 도매매출 정보를 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["pharmacy_name", "business_number", "sales_amount"],
                "properties": {
                  "pharmacy_name": {
                    "type": "string",
                    "description": "약국명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "sales_amount": {
                    "type": "number",
                    "description": "매출액"
                  },
                  "sales_date": {
                    "type": "string",
                    "format": "date",
                    "description": "매출일"
                  },
                  "product_id": {
                    "type": "string",
                    "description": "제품 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "도매매출 등록 성공"
          }
        }
      }
    },
    "/api/direct-sales": {
      "get": {
        "tags": ["참고 데이터"],
        "summary": "직거래매출 목록 조회",
        "description": "직거래매출 정보 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "직거래매출 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["참고 데이터"],
        "summary": "직거래매출 등록",
        "description": "새로운 직거래매출 정보를 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["pharmacy_name", "business_number", "sales_amount"],
                "properties": {
                  "pharmacy_name": {
                    "type": "string",
                    "description": "약국명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "sales_amount": {
                    "type": "number",
                    "description": "매출액"
                  },
                  "sales_date": {
                    "type": "string",
                    "format": "date",
                    "description": "매출일"
                  },
                  "product_id": {
                    "type": "string",
                    "description": "제품 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "직거래매출 등록 성공"
          }
        }
      }
    },
    "/api/notices": {
      "get": {
        "tags": ["공지사항"],
        "summary": "공지사항 목록 조회",
        "description": "등록된 공지사항 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "공지사항 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["공지사항"],
        "summary": "공지사항 등록",
        "description": "새로운 공지사항을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["title", "content"],
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "제목"
                  },
                  "content": {
                    "type": "string",
                    "description": "내용"
                  },
                  "is_important": {
                    "type": "boolean",
                    "description": "중요 공지 여부"
                  },
                  "author_id": {
                    "type": "string",
                    "description": "작성자 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "공지사항 등록 성공"
          }
        }
      }
    },
    "/api/clients": {
      "get": {
        "tags": ["기본 정보"],
        "summary": "고객 목록 조회",
        "description": "등록된 고객들의 목록을 조회합니다.",
        "responses": {
          "200": {
            "description": "고객 목록 조회 성공"
          }
        }
      },
      "post": {
        "tags": ["기본 정보"],
        "summary": "고객 등록",
        "description": "새로운 고객을 등록합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["client_name", "business_number"],
                "properties": {
                  "client_name": {
                    "type": "string",
                    "description": "고객명"
                  },
                  "business_number": {
                    "type": "string",
                    "description": "사업자등록번호"
                  },
                  "address": {
                    "type": "string",
                    "description": "주소"
                  },
                  "phone": {
                    "type": "string",
                    "description": "전화번호"
                  },
                  "email": {
                    "type": "string",
                    "description": "이메일"
                  },
                  "contact_person": {
                    "type": "string",
                    "description": "담당자"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "고객 등록 성공"
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "tags": ["시스템"],
        "summary": "시스템 상태 확인",
        "description": "시스템의 전반적인 상태를 확인합니다.",
        "responses": {
          "200": {
            "description": "시스템 상태 확인 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "version": {
                      "type": "string",
                      "example": "2.0.0"
                    },
                    "database": {
                      "type": "string",
                      "example": "connected"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "description": "오류 메시지"
          },
          "error": {
            "type": "string",
            "description": "상세 오류 정보"
          }
        }
      }
    }
  }
} 